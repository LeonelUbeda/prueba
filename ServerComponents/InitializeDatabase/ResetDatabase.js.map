{"version":3,"sources":["../../../src/ServerComponents/InitializeDatabase/ResetDatabase.js"],"names":["ResetDatabase","Promise","resolve","reject","mysqlQueryDrop","fs","readFileSync","__dirname","connection","CreateConnection","console","log","query","error","results","fields","then"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAE1B;AACA,SAAO,IAAIC,OAAJ,CAAY,UAAEC,OAAF,EAAWC,MAAX,EAAuB;AAItC,QAAMC,cAAc,GAAGC,eAAGC,YAAH,CAAiB,gBAAMC,SAAN,EAAkB,8BAAlB,CAAjB,EAAoE,MAApE,CAAvB;AAAA,QACAC,UAAU,GAAGC,4BADb;;AAGAC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAPsC,CAQtC;;AACAH,IAAAA,UAAU,CAACI,KAAX,CAAiBR,cAAjB,EAAiC,UAACS,KAAD,EAAQC,OAAR,EAAiBC,MAAjB,EAA4B;AAC3D;AAEA,UAAIF,KAAJ,EAAW;AACTV,QAAAA,MAAM,CAACU,KAAD,CAAN;AACA,eAAO,IAAP;AACD,OAHD,MAGK;AACHH,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACD;;AAED,4CACGK,IADH,CACS;AAAA,eAAMd,OAAO,EAAb;AAAA,OADT,WAEU;AAAA,eAAMC,MAAM,EAAZ;AAAA,OAFV;AAMH,KAhBC;AAiBH,GA1BM,CAAP;AA2BD,CA9BD;;eAgCeH,a","sourcesContent":["import { join } from 'path';\r\nimport fs from 'fs';\r\nimport CreateConnection from '../CreateConnection/CreateConnection';\r\nimport InitializeDatabase from './InitializeDatabase';\r\n\r\nconst ResetDatabase = () => {\r\n  \r\n  // Crea la promesa para inicializar la base datos\r\n  return new Promise(( resolve, reject ) => {\r\n\r\n\r\n        \r\n      const mysqlQueryDrop = fs.readFileSync( join( __dirname,  '../../ServerFiles/DropDB.sql'), \"utf8\"),\r\n      connection = CreateConnection;\r\n\r\n      console.log(\"Borrando base de datos...\")\r\n      // De lo contrario, procede a la segunda query\r\n      connection.query(mysqlQueryDrop, (error, results, fields) => {\r\n        // Devuelve el error si encuentra alguno\r\n        \r\n        if (error) {\r\n          reject(error);\r\n          return null;\r\n        }else{\r\n          console.log(\"Borrado completo...\")\r\n        }\r\n\r\n        InitializeDatabase()\r\n          .then( () => resolve())\r\n          .catch( () => reject());\r\n\r\n        \r\n      \r\n    });\r\n  });\r\n}\r\n\r\nexport default ResetDatabase;\r\n"],"file":"ResetDatabase.js"}