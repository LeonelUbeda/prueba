{"version":3,"sources":["../../../src/AuthComponents/VerificarLogin/VericarLogin.js"],"names":["VerificarLogin","usuario","contra","Promise","resolve","reject","connection","CreateConnection","query","mysql","escape","error","results","fields","length"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAAEC,OAAF,EAAWC,MAAX,EAAuB;AAC5C,SAAO,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAMC,UAAU,GAAGC,4BAAnB;AACA,QAAMC,KAAK,8mCAiC8EC,kBAAMC,MAAN,CAAaT,OAAb,CAjC9E,8BAiCuHQ,kBAAMC,MAAN,CAAaR,MAAb,CAjCvH,CAAX;AAmCAI,IAAAA,UAAU,CAACE,KAAX,CAAiBA,KAAjB,EAAwB,UAACG,KAAD,EAAQC,OAAR,EAAiBC,MAAjB,EAA4B;AAElD,UAAIF,KAAJ,EAAW;AACTN,QAAAA,MAAM,CAACM,KAAD,CAAN;AACD,OAFD,MAIK,IAAIC,OAAO,CAACE,MAAR,IAAkB,CAAtB,EAA0B;AAC7BV,QAAAA,OAAO,CAACQ,OAAD,CAAP;AACD,OAFI,MAGA;AACHP,QAAAA,MAAM,CAAC,2BAAD,CAAN;AACD;AACF,KAZD;AAaD,GAlDM,CAAP;AAoDD,CArDD;;eAuDeL,c","sourcesContent":["import mysql from 'mysql';\r\nimport CreateConnection from '../../ServerComponents/CreateConnection/CreateConnection';\r\n\r\nconst VerificarLogin = ( usuario, contra ) => {\r\n  return new Promise( (resolve, reject) => {\r\n    const connection = CreateConnection;\r\n    const query = `select roles.ID_rol,nombre,user,name, pass,\r\n    (case productos\r\n          when 'Ninguno' then 1\r\n          when 'Leer' then 2\r\n          when 'Escribir' then 3\r\n          when 'Actualizar' then 4\r\n          when 'Eliminar' then 5\r\n          end) as productos,\r\n    (case clasificacion\r\n          when 'Ninguno' then 1\r\n          when 'Leer' then 2\r\n          when 'Escribir' then 3\r\n          when 'Actualizar' then 4\r\n          when 'Eliminar' then 5\r\n          end) as clasificacion,\r\n    (case lotes\r\n          when 'Ninguno' then 1\r\n          when 'Leer' then 2\r\n          when 'Escribir' then 3\r\n          when 'Actualizar' then 4\r\n          when 'Eliminar' then 5\r\n          end) as lotes,\r\n    (case reportes\r\n          when 'Ninguno' then 1\r\n          when 'Leer' then 2\r\n          when 'Escribir' then 3\r\n          when 'Actualizar' then 4\r\n          when 'Eliminar' then 5\r\n          end) as reportes,\r\n    (case administrador\r\n          when 'No' then 1\r\n          when 'Si' then 2\r\n          end) as administrador \r\n      from usuarios join roles on usuarios.ID_rol = roles.ID_rol  where upper(user) regexp ${mysql.escape(usuario)} and pass regexp ${mysql.escape(contra)}`;\r\n  \r\n    connection.query(query, (error, results, fields) => {\r\n      \r\n      if (error) {\r\n        reject(error);\r\n      }\r\n\r\n      else if (results.length == 1 ) {\r\n        resolve(results);\r\n      }\r\n      else {\r\n        reject('No se encontro el usuario');\r\n      }\r\n    });\r\n  })\r\n\r\n}\r\n\r\nexport default VerificarLogin;\r\n"],"file":"VericarLogin.js"}